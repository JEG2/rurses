
describe Rurses, '#get_key' do

  it 'returns the correct special key symbol' do
    keys = {
      1 => :CTRL_A,
      2 => :CTRL_B,
      3 => :CTRL_C,
      4 => :CTRL_D,
      5 => :CTRL_E,
      6 => :CTRL_F,
      7 => :CTRL_G,
      8 => :CTRL_H,
      9 => :CTRL_I,
      10 => :CTRL_J,
      11 => :CTRL_K,
      12 => :CTRL_L,
      13 => :CTRL_M,
      14 => :CTRL_N,
      15 => :CTRL_O,
      16 => :CTRL_P,
      17 => :CTRL_Q,
      18 => :CTRL_R,
      19 => :CTRL_S,
      20 => :CTRL_T,
      21 => :CTRL_U,
      22 => :CTRL_V,
      23 => :CTRL_W,
      24 => :CTRL_X,
      25 => :CTRL_Y,
      26 => :CTRL_Z,
      27 => :ESCAPE,
      256 => :CODE_YES,
      257 => :BREAK,
      258 => :DOWN,
      259 => :UP,
      260 => :LEFT,
      261 => :RIGHT,
      262 => :HOME,
      263 => :BACKSPACE,
      264 => :F0,
      265 => :F1,
      266 => :F2,
      267 => :F3,
      268 => :F4,
      269 => :F5,
      270 => :F6,
      271 => :F7,
      272 => :F8,
      273 => :F9,
      274 => :F10,
      275 => :F11,
      276 => :F12,
      277 => :F13,
      278 => :F14,
      279 => :F15,
      280 => :F16,
      281 => :F17,
      282 => :F18,
      283 => :F19,
      284 => :F20,
      285 => :F21,
      286 => :F22,
      287 => :F23,
      288 => :F24,
      289 => :F25,
      290 => :F26,
      291 => :F27,
      292 => :F28,
      293 => :F29,
      294 => :F30,
      295 => :F31,
      296 => :F32,
      297 => :F33,
      298 => :F34,
      299 => :F35,
      300 => :F36,
      301 => :F37,
      302 => :F38,
      303 => :F39,
      304 => :F40,
      305 => :F41,
      306 => :F42,
      307 => :F43,
      308 => :F44,
      309 => :F45,
      310 => :F46,
      311 => :F47,
      312 => :F48,
      313 => :F49,
      314 => :F50,
      315 => :F51,
      316 => :F52,
      317 => :F53,
      318 => :F54,
      319 => :F55,
      320 => :F56,
      321 => :F57,
      322 => :F58,
      323 => :F59,
      324 => :F60,
      325 => :F61,
      326 => :F62,
      327 => :F63,
      328 => :F64,
      329 => :IL,
      330 => :DC,
      331 => :IC,
      332 => :EIC,
      333 => :CLEAR,
      334 => :EOS,
      335 => :EOL,
      336 => :SF,
      337 => :SR,
      338 => :NPAGE,
      339 => :PPAGE,
      340 => :STAB,
      341 => :CTAB,
      342 => :CATAB,
      343 => :ENTER,
      344 => :SRESET,
      345 => :RESET,
      346 => :PRINT,
      347 => :LL,
      348 => :A1,
      349 => :A3,
      350 => :B2,
      351 => :C1,
      352 => :C3,
      353 => :BTAB,
      354 => :BEG,
      355 => :CANCEL,
      356 => :CLOSE,
      357 => :COMMAND,
      358 => :COPY,
      359 => :CREATE,
      360 => :END,
      361 => :EXIT,
      362 => :FIND,
      363 => :HELP,
      364 => :MARK,
      365 => :MESSAGE,
      366 => :MOVE,
      367 => :NEXT,
      368 => :OPEN,
      369 => :OPTIONS,
      370 => :PREVIOUS,
      371 => :REDO,
      372 => :REFERENCE,
      373 => :REFRESH,
      374 => :REPLACE,
      375 => :RESTART,
      376 => :RESUME,
      377 => :SAVE,
      378 => :SBEG,
      379 => :SCANCEL,
      380 => :SCOMMAND,
      381 => :SCOPY,
      382 => :SCREATE,
      383 => :SDC,
      384 => :SDL,
      385 => :SELECT,
      386 => :SEND,
      387 => :SEOL,
      388 => :SEXIT,
      389 => :SFIND,
      390 => :SHELP,
      391 => :SHOME,
      392 => :SIC,
      393 => :SLEFT,
      394 => :SMESSAGE,
      395 => :SMOVE,
      396 => :SNEXT,
      397 => :SOPTIONS,
      398 => :SPREVIOUS,
      399 => :SPRINT,
      400 => :SREDO,
      401 => :SREPLACE,
      402 => :SRIGHT,
      403 => :SRSUME,
      404 => :SSAVE,
      405 => :SSUSPEND,
      406 => :SUNDO,
      407 => :SUSPEND,
      408 => :UNDO,
      409 => :MOUSE,
      410 => :RESIZE,
      411 => :EVENT,
      511 => :MAX
    }

    keys.each do |key, symbol|
      allow(FFI::NCurses).to receive(:getch).and_return(key)
      expect(Rurses.get_key).to eq symbol
    end

    # Not covered by ffi-ncurses
    allow(FFI::NCurses).to receive(:getch).and_return(127)
    expect(Rurses.get_key).to eq :BACKSPACE
  end
end
